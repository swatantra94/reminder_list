{% extends 'base.html' %}

{% block content %}

<div class="row">
    <div class="col s12 m6">
        <ul>
            {% for item in todolists %}
            
                <div class="card blue-grey darken-1 row">
                    <div class="card-content white-text">
                        <div class="card-title"><li>{{item}}</li></div>
                        <p>{{ item.description }}</p>
                        <p></p>
                        </div>
                        <div class="card-action">
                        <a class="modal-trigger" href="#postModal{{item.id}}">Comments-{{item.comment_set.count}}</a>
                    </div>
                </div>
                <div id="postModal{{item.id}}" class="modal">
                    <div class="modal-content">
                      <h4>Comments</h4>
                    </div>
                    <ul>
                        {% for comment in item.comment_set.all %}
                        <li>{{comment.user.username}}-{{comment.comment}}</li>
                        {% endfor %}
                        <form action="" method="post">
                            {% csrf_token %}
                            {{form}}
                            
                            <button class="btn waves-effect waves-light" type="submit" name="action" value="">Submit
                                <i class="material-icons right">send</i>
                        </form>
                    </ul>
                  </div>
            {% endfor %}
        </ul>
    </div>
  </div>
        
{% endblock %}